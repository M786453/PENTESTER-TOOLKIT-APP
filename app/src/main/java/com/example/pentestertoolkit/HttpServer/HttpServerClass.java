package com.example.pentestertoolkit.HttpServer;

import android.os.Environment;

import com.example.pentestertoolkit.Global.FileManagement;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.Map;

import fi.iki.elonen.NanoHTTPD;

public class HttpServerClass extends NanoHTTPD {

    private String server_root;

    public HttpServerClass(String server_root) {
        super(8080);
        this.server_root = server_root;
    }

    @Override
    public Response serve(String uri, Method method, Map<String, String> headers, Map<String, String> parms, Map<String, String> files) {

        String response = "";

        try{

            // Reading index.html file
            String index_file_path = server_root + "/index.html";

            FileReader index = new FileReader(index_file_path);

            BufferedReader reader = new BufferedReader(index);

            String line = "";

            while((line = reader.readLine()) != null){
                response += line;
            }

            reader.close();


        }catch (Exception e){
            e.printStackTrace();
        }


        return newFixedLengthResponse(response);
    }
}
