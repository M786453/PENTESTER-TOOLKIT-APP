package com.example.pentestertoolkit.SiteMapper;

import android.util.Log;

import java.util.ArrayList;
import java.util.List;

public class LinkClassifier {

    private TreeNode root;

    public LinkClassifier(){
        root = new TreeNode("/");
    }

    public void addLink(String link){

        String[] parts = link.split("/");

        TreeNode node = root;

        for(String part : parts){

            TreeNode child = node.getChild(part);

            if (child == null){
                child = new TreeNode(part);
                node.addChild(child);
            }

            node = child;


        }

    }

    public void printHierarchy(){

        printHierarchy(root, 0);

    }

    private void printHierarchy(TreeNode node, int depth){
        String emptyString = "";
        for (int i=0; i < depth; i++){
           emptyString += " ";
        }
        Log.i("HIERARCHY: ", emptyString + node.getValue());

        for(TreeNode child : node.getChildren()){
            printHierarchy(child, depth + 1);
        }

    }

    private class TreeNode{

        private String value;

        private List<TreeNode> children;

        public TreeNode(String value){
            this.value = value;
            children = new ArrayList<>();
        }

        public String getValue(){
            return value;
        }

        public List<TreeNode> getChildren(){
            return children;
        }

        public TreeNode getChild(String value){
            for(TreeNode child:children){
                if (child.getValue().equals(value))
                    return child;
            }
            return null;
        }

        public void addChild(TreeNode child){
            children.add(child);
        }


    }

}
