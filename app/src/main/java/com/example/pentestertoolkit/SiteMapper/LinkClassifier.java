package com.example.pentestertoolkit.SiteMapper;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.TextView;

import com.example.pentestertoolkit.R;

import java.util.ArrayList;
import java.util.List;

public class LinkClassifier {

    public LinkNode root;

    public LinkClassifier(){
        root = new LinkNode("/");
    }

    public void addLink(String link){

        String[] parts = link.split("/");

        LinkNode node = root;

        for(String part : parts){

            LinkNode child = node.getChild(part);

            if (child == null){
                child = new LinkNode(part);
                node.addChild(child);
            }

            node = child;


        }

    }

    public void printHierarchy(){

        printHierarchy(root, 0);

    }

    private void printHierarchy(LinkNode node, int depth){
        String emptyString = "";
        for (int i=0; i < depth; i++){
           emptyString += " ";
        }
        Log.i("HIERARCHY: ", emptyString + node.getValue());

        for(LinkNode child : node.getChildren()){
            printHierarchy(child, depth + 1);
        }

    }




    public class LinkNode {

        private String value;

        private List<LinkNode> children;

        public LinkNode(String value){
            this.value = value;
            children = new ArrayList<>();
        }

        public String getValue(){
            return value;
        }

        public List<LinkNode> getChildren(){
            return children;
        }

        public LinkNode getChild(String value){
            for(LinkNode child:children){
                if (child.getValue().equals(value))
                    return child;
            }
            return null;
        }

        public void addChild(LinkNode child){
            children.add(child);
        }


    }

}
