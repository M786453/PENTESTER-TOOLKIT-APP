package com.example.pentestertoolkit.Notes;

import android.content.Intent;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.DiffUtil;
import androidx.recyclerview.widget.ListAdapter;

import com.example.pentestertoolkit.R;

public class NotesListAdapter extends ListAdapter<Note, NoteViewHolder> {

    public NotesListAdapter(@NonNull DiffUtil.ItemCallback<Note> diffCallback){
        super(diffCallback);
    }


    @NonNull
    @Override
    public NoteViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        return NoteViewHolder.create(parent);
    }

    @Override
    public void onBindViewHolder(@NonNull NoteViewHolder holder, int position) {
        Note current = getItem(position);
        holder.itemView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                        Log.i("CLICK_NOTE", "DONE");
                        Intent updateActivityIntent = new Intent(holder.itemView.getContext(), UpdateNote.class);
                        updateActivityIntent.putExtra("NOTE_ID", current.getId());
                        updateActivityIntent.putExtra("NOTE",current.getNote());
                        holder.itemView.getContext().startActivity(updateActivityIntent);

            }
        });
        holder.bind(current.getNote());
    }

    static class NoteDiff extends DiffUtil.ItemCallback<Note>{


        @Override
        public boolean areItemsTheSame(@NonNull Note oldItem, @NonNull Note newItem) {
            return oldItem == newItem;
        }

        @Override
        public boolean areContentsTheSame(@NonNull Note oldItem, @NonNull Note newItem) {
            return oldItem.getNote() == newItem.getNote();
        }
    }


}
